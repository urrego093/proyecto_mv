(dp1
S'output'
p2
S"<type 'exceptions.AttributeError'> 'list' object has no attribute 'rfind'"
p3
sS'layer'
p4
S'/home/Carlos/Documentos/cloneGit/proyecto_mv/applications/datos/controllers/default.py'
p5
sS'code'
p6
S'# -*- coding: utf-8 -*-\n# this file is released under public domain and you can use without limitations\n\n#########################################################################\n## This is a sample controller\n## - index is the default action of any application\n## - user is required for authentication and authorization\n## - download is for downloading files uploaded in the db (does streaming)\n#########################################################################\nimport evaluar_expresion\n\ndef index():\n    a = \'usuarioas2, usuario 15-18\'\n    b = evaluar_expresion.evaluar(a)\n    print b\n    response.flash = T("Hello People UD")\n    return locals();\n\n@auth.requires_login()\n@auth.requires_membership(\'Administrador\')\ndef register_course():\n    form = SQLFORM(db1.course).process()\n    if form.accepted:\n        session.flash = T("Course Create!")\n        redirect(URL(\'index\'))\n    return locals()\n\n@auth.requires_login()\n@auth.requires_membership(\'Administrador\')\ndef register_machine():\n    form = SQLFORM(db1.machine).process()\n    if form.accepted:\n        registrar_host(form.vars.id)\n        session.flash = T(" Machine Create!")\n        redirect(URL(\'index\'))\n    return locals()\n\n@auth.requires_login()\n@auth.requires_membership(\'Administrador\')\ndef registrar_host(id_machine):\n    for row in P_HOST:\n        db1.port_machine.insert(ip_machine=id_machine, number_port=row)\n        db1.commit()\n\n@auth.requires_login()\n@auth.requires_membership(\'Administrador\')\ndef agree_teacher():\n    rows = db1(db1.auth_user.registration_key==\'pending\').select()\n    return locals()\n\n\ndef show_teacher():\n    user = db1.auth_user(request.args(0, cast=int))\n    user.update(registration_key=\'\')\n    db1.auth_user.first_name.writable = False\n    db1.auth_user.first_name.reable = False\n    db1.auth_user.last_name.writable = False\n    db1.auth_user.last_name.reable = False\n    form = SQLFORM(db1.auth_user, user, deletable=True, showid=False)\n\n    if form.process(next=URL(\'update_group_teacher\', args=user.id)).accepted:\n        response.flash = T (\'Teacher accepted\')\n\n    elif form.errors:\n        response.flash = T (\'Teacher No Update\')\n\n\n\n    return locals()\n\ndef update_group_teacher():\n    member = db1.auth_membership(request.args(0, cast=int) or redirect(URL(\'index\')))\n\n    if member:\n        ruta_basica = os.path.join(request.folder, \'uploads/\')\n        ruta_basica = ruta_basica + str(member.user_id)\n        try:\n            os.makedirs(ruta_basica)\n        except OSError:\n            pass\n        # si no podemos crear la ruta dejamos que pase\n        # si la operaci\xc3\xb3n resulto con \xc3\xa9xito nos cambiamos al directorio \n        os.chdir(ruta_basica)\n        member.update(group_id=2)\n        db1.auth_membership.user_id.writable = False\n        db1.auth_membership.user_id.reable = False\n        db1.auth_membership.group_id.writable = False\n        db1.auth_membership.group_id.reable = False\n        form = SQLFORM(db1.auth_membership, member, showid=False)\n\n        if form.process(next=URL(\'agree_teacher\')).accepted:\n            response.flash = T (\'User Agree to Teacher Group\')\n        elif form.errors:\n            response.flash = T (\'Group No Update\')\n    else:\n        redirect(URL(\'index\'))\n    return locals()\n\ndef mostrar_macxuser():\n    course = db1.course(request.args(1, cast=int) or redirect(URL(\'index\')))\n    machine = db1.machine(request.args(0, cast=int) or redirect(URL(\'index\')))\n    c_group = db1((db1.course_group.cod_course==course.id)& (db1.course_group.id_teacher==auth.user_id)).select()\n    return locals()\n\n@auth.requires_login()\n@auth.requires_membership(\'Docente\')\ndef show_couxuser():\n    course = db1.course(request.args(0, cast=int) or redirect(URL(\'index\')))\n    c_machine= db1((db1.machine.code_course==course.id)).select()\n\n\n    query_maquinas = db1.machine.code_course==course.id\n    campos_maquina = [db1.machine.ip_machine, db1.machine.operative_system, db1.machine.memory, db1.machine.processor]\n    maquinas = SQLFORM.grid(query_maquinas, fields = campos_maquina, csv=False, editable=False, deletable=False,\n        searchable=False, # No no moverlo, la busqueda no va a servir debido a q user_signature esta desativado\n        details=False, create=False,\n        user_signature=False # Si se deja activada como es por defecto resulta en un error extrano, solo en este formulario\n        ,links=[lambda row:A(T("Select"),_href=URL(\'mostrar_macxuser\',args=(row.id, course.id)))],\n        links_placement = \'left\'\n    )\n\n    groups_text = T("Groups of ")\n    query_grupos = db1.course_group.cod_course==course.id and db1.course_group.id_teacher == auth.user_id # eliminar la segunda condicion para q muestre todos los grupos de la materia\n    campos_grupo = [db1.course_group.cod_group, db1.course_group.semester]\n    groups = SQLFORM.grid(query_grupos, fields = campos_grupo ,\n        csv=False, editable=False, deletable=False, searchable=False, details=False,\n        create=False, user_signature=False\n    )\n    return locals()\n\ndef show_ports():\n    semes = request.args(0)\n    course = db1.course(request.args(2, cast=int) or redirect(URL(\'index\')))\n    machine = db1.machine(request.args(1, cast=int) or redirect(URL(\'index\')))\n    num_group = request.args(3) or redirect(URL(\'index\'))\n    port_mac = db1(db1.port_machine.ip_machine==machine.id).select()\n    response.flash = T (num_group)\n    list_port = []\n\n    for port_m in port_mac:\n        list_est = db1((db1.student_x_machine.ip_machine==port_m.id) &\n                       (db1.student_x_machine.semester==semes)).select(db1.student_x_machine.name_student, db1.student_x_machine.code_student)\n        for l_est in list_est:\n            list_port.append((port_m.number_port, port_m.hostname, l_est.code_student, l_est.name_student))\n\n    return locals()\n\n\ndef list_files():\n    folder_user = "uploads/" + str(auth.user_id) + "/"\n    ruta_basica = os.path.join(request.folder, folder_user)\n    lstDir = os.walk(ruta_basica)\n    #Lista vacia para incluir los ficheros\n    lstFiles = []\n    #Crea una lista de los ficheros jpg que existen en el directorio y los incluye a la lista.\n    for files in lstDir:\n        for fichero in files:\n            (nombreFichero, extension) = os.path.splitext(fichero)\n            lstFiles.append(nombreFichero+extension)\n    return locals()\n\n\n\ndef user():\n    """\n    exposes:\n    http://..../[app]/default/user/login\n    http://..../[app]/default/user/logout\n    http://..../[app]/default/user/register\n    http://..../[app]/default/user/profile\n    http://..../[app]/default/user/retrieve_password\n    http://..../[app]/default/user/change_password\n    http://..../[app]/default/user/bulk_register\n    use @auth.requires_login()\n        @auth.requires_membership(\'group name\')\n        @auth.requires_permission(\'read\',\'table name\',record_id)\n    to decorate functions that need access control\n    also notice there is http://..../[app]/appadmin/manage/auth to allow administrator to manage users\n    """\n\n    return dict(form=auth())\n\n\n@cache.action()\ndef download():\n    """\n    allows downloading of uploaded files\n    http://..../[app]/default/download/[filename]\n    """\n    return response.download(request, db)\n\n\ndef call():\n    """\n    exposes services. for example:\n    http://..../[app]/default/call/jsonrpc\n    decorate with @services.jsonrpc the functions to expose\n    supports xml, json, xmlrpc, jsonrpc, amfrpc, rss, csv\n    """\n    return service()\n\nresponse._vars=response._caller(list_files)\n'
p7
sS'snapshot'
p8
(dp9
sS'traceback'
p10
S'Traceback (most recent call last):\n  File "/home/Carlos/Documentos/cloneGit/proyecto_mv/gluon/restricted.py", line 227, in restricted\n    exec ccode in environment\n  File "/home/Carlos/Documentos/cloneGit/proyecto_mv/applications/datos/controllers/default.py", line 202, in <module>\n  File "/home/Carlos/Documentos/cloneGit/proyecto_mv/gluon/globals.py", line 415, in <lambda>\n    self._caller = lambda f: f()\n  File "/home/Carlos/Documentos/cloneGit/proyecto_mv/applications/datos/controllers/default.py", line 158, in list_files\n    (nombreFichero, extension) = os.path.splitext(fichero)\n  File "/usr/lib64/python2.7/posixpath.py", line 98, in splitext\n    return genericpath._splitext(p, sep, altsep, extsep)\n  File "/usr/lib64/python2.7/genericpath.py", line 99, in _splitext\n    sepIndex = p.rfind(sep)\nAttributeError: \'list\' object has no attribute \'rfind\'\n'
p11
s.